{% extends 'master.html' %}
{% load static %}
{% block content %}

<style>
    .failed {
        color: #721c24;
        background-color: #f8d7da !important;
        border-color: #f5c6cb;
    }

    .success {
        color: #155724;
        background-color: #d4edda !important;
        border-color: #c3e6cb;
    }
</style>
<div class="container text-left py-5">

    <div class="card">
        <h5 class="card-header">Verification Log</h5>
        <div class="card-body">
            <table id="verification-attempts" class="datatable" data-search-align="left" data-toggle="table" data-search="true" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="th-sm">ID</th>
                        <th class="th-sm">Timestamp</th>
                        <th class="th-sm">Verifier</th>
                        <th class="d-none d-sm-table-cell">CWID</th>
                        <th class="d-none d-sm-table-cell">Phone to Verify</th>
                        <th class="d-none d-sm-table-cell">Passphrase</th>
                        <th class="d-none d-sm-table-cell">MSG Delivery Status</th>
                        <th class="d-none d-sm-table-cell">Verify Successful</th>
                    </tr>
                </thead>
                <tbody>
                    {% for attempt in verification_attempts %}
                    <tr {% if attempt.verification_successful %} class="success" {% else %} class="failed" {% endif %}>
                        <td>{{ attempt.id}}</td>
                        <td>{{attempt.timestamp}}</td>
                        <td>{{attempt.verifier.username}}</td>
                        <td class="d-none d-sm-table-cell">{{attempt.cwid}}</td>
                        <td class="d-none d-sm-table-cell">{{attempt.phone_number}}</td>
                        <td class="d-none d-sm-table-cell"> {{attempt.passphrase}}</td>
                        <td class="d-none d-sm-table-cell"> {{attempt.message_delivery_status}}</td>
                        <td class="d-none d-sm-table-cell"> {{attempt.verification_successful}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th class="th-sm">ID</th>
                        <th class="th-sm">Timestamp</th>
                        <th class="th-sm">Verifier</th>
                        <th class="d-none d-sm-table-cell">CWID</th>
                        <th class="d-none d-sm-table-cell">Phone to Verify</th>
                        <th class="d-none d-sm-table-cell">Passphrase</th>
                        <th class="d-none d-sm-table-cell">MSG Delivery Status</th>
                        <th class="d-none d-sm-table-cell">Verify Successful</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

{% endblock %}